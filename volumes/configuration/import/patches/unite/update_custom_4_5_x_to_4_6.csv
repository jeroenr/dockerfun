#### INCIDENT REGISTRATION

configurationSetting,incident.flowHasSupplementStep.enabled,false
configurationSetting,incident.flowHasClosedStep.enabled,false

# when classification is NOT configured
configurationSetting,incident.notifyOn.IncidentRegisteredEvent.creator.enabled,false
configurationSetting,incident.notifyOn.IncidentRegisteredEvent.owner.enabled,false
configurationSetting,incident.notifyOn.IncidentRegisteredEvent.assignee.enabled,false
configurationSetting,incident.notifyOn.IncidentRegisteredEvent.reporter.enabled,false
configurationSetting,incident.notifyOn.IncidentRegisteredEvent.roles,coordinator

## when classification is configured
#configurationSetting,incident.notifyOn.IncidentRegisteredEvent.creator.enabled,false
#configurationSetting,incident.notifyOn.IncidentRegisteredEvent.owner.enabled,false
#configurationSetting,incident.notifyOn.IncidentRegisteredEvent.assignee.enabled,false
#configurationSetting,incident.notifyOn.IncidentRegisteredEvent.reporter.enabled,false
#configurationSetting,incident.notifyOn.IncidentRegisteredEvent.roles,hse-supervisor

configurationSetting,incident.notifyOn.IncidentRegistrationClassifiedEvent.creator.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationClassifiedEvent.owner.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationClassifiedEvent.assignee.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationClassifiedEvent.reporter.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationClassifiedEvent.roles,coordinator

configurationSetting,incident.notifyOn.IncidentRegistrationTakenUnderConsiderationEvent.creator.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationTakenUnderConsiderationEvent.owner.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationTakenUnderConsiderationEvent.assignee.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationTakenUnderConsiderationEvent.reporter.enabled,true
configurationSetting,incident.notifyOn.IncidentRegistrationTakenUnderConsiderationEvent.roles,

configurationSetting,incident.notifyOn.IncidentActivitiesApprovedEvent.creator.enabled,false
configurationSetting,incident.notifyOn.IncidentActivitiesApprovedEvent.owner.enabled,false
configurationSetting,incident.notifyOn.IncidentActivitiesApprovedEvent.assignee.enabled,true
configurationSetting,incident.notifyOn.IncidentActivitiesApprovedEvent.reporter.enabled,false
configurationSetting,incident.notifyOn.IncidentActivitiesApprovedEvent.roles,

configurationSetting,incident.notifyOn.IncidentRegistrationCompletedEvent.creator.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationCompletedEvent.owner.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationCompletedEvent.assignee.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationCompletedEvent.reporter.enabled,true
configurationSetting,incident.notifyOn.IncidentRegistrationCompletedEvent.roles,hse-auditor

configurationSetting,incident.notifyOn.IncidentRegistrationRejectedEvent.creator.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationRejectedEvent.owner.enabled,true
configurationSetting,incident.notifyOn.IncidentRegistrationRejectedEvent.assignee.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationRejectedEvent.reporter.enabled,true
configurationSetting,incident.notifyOn.IncidentRegistrationRejectedEvent.roles,

configurationSetting,incident.notifyOn.IncidentRegistrationClosedEvent.creator.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationClosedEvent.owner.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationClosedEvent.assignee.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationClosedEvent.reporter.enabled,false
configurationSetting,incident.notifyOn.IncidentRegistrationClosedEvent.roles,


## roles below are hardcoded in RoleIF, they should not be modified

## add new role
role,initiator,incident,nl::initiator;en::initiator;de::initiator;es::iniciador;fr::initiateur
role,hse-supervisor,incident,nl::hse-supervisor;en::hse-supervisor;de::hse-aufseher;es::hse-superintende;fr::hse-superviseur
role,coordinator,incident,nl::coordinator;en::coordinator;de::koordinator;es::coordinador;fr::coordinateur
role,hse-auditor,incident,nl::hse-auditeur;en::hse-auditor;de::hse-rechnungspr√ºfer;es::hse-auditor;fr::hse-auditeur

## update existing
@SQL,UPDATE IBANX_ROLE SET SYSTEM = 1 WHERE NAME = 'initiator'
@SQL,UPDATE IBANX_ROLE SET SYSTEM = 1 WHERE NAME = 'coordinator'
@SQL,UPDATE IBANX_ROLE SET MODULE = 'incident' WHERE NAME = 'initiator'
@SQL,UPDATE IBANX_ROLE SET MODULE = 'incident' WHERE NAME = 'coordinator'

system-permission,400,RegisterIncidentCommand
@startTransaction
@method,setRepeating,system-permission,RegisterIncidentCommand,role,initiator
@method,set,system-permission,RegisterIncidentCommand,entity,incident
@endTransaction

system-permission,405,EditIncidentCommand
@startTransaction
@method,setRepeating,system-permission,EditIncidentCommand,role,owner
@method,set,system-permission,EditIncidentCommand,entity,incident
@endTransaction

system-permission,407,OverrideIncidentCommand
@startTransaction
@method,setRepeating,system-permission,OverrideIncidentCommand,role,owner
@method,set,system-permission,OverrideIncidentCommand,entity,incident
@endTransaction

system-permission,410,SupplementIncidentRegistrationCommand
@startTransaction
@method,setRepeating,system-permission,SupplementIncidentRegistrationCommand,role,owner
@method,setRepeating,system-permission,SupplementIncidentRegistrationCommand,role,coordinator
@method,setRepeating,system-permission,SupplementIncidentRegistrationCommand,role,hse-supervisor
@method,set,system-permission,SupplementIncidentRegistrationCommand,entity,incident
@endTransaction

system-permission,415,VerifyIncidentRegistrationCommand
@startTransaction
@method,setRepeating,system-permission,VerifyIncidentRegistrationCommand,role,coordinator
@method,set,system-permission,VerifyIncidentRegistrationCommand,entity,incident
@endTransaction

system-permission,420,ExecuteActivitiesCommand
@startTransaction
@method,setRepeating,system-permission,ExecuteActivitiesCommand,role,owner
@method,set,system-permission,ExecuteActivitiesCommand,entity,incident
@endTransaction

system-permission,422,RejectEarlyIncidentRegistrationCommand
@startTransaction
@method,setRepeating,system-permission,RejectEarlyIncidentRegistrationCommand,role,hse-auditor
@method,set,system-permission,RejectEarlyIncidentRegistrationCommand,entity,incident
@endTransaction

system-permission,423,RejectLateIncidentRegistrationCommand
@startTransaction
@method,setRepeating,system-permission,RejectLateIncidentRegistrationCommand,role,hse-auditor
@method,set,system-permission,RejectLateIncidentRegistrationCommand,entity,incident
@endTransaction

system-permission,425,CloseIncidentRegistrationCommand
@startTransaction
@method,setRepeating,system-permission,CloseIncidentRegistrationCommand,role,owner
@method,setRepeating,system-permission,CloseIncidentRegistrationCommand,role,coordinator
@method,setRepeating,system-permission,CloseIncidentRegistrationCommand,role,hse-auditor
@method,set,system-permission,CloseIncidentRegistrationCommand,entity,incident
@endTransaction

system-permission,430,AddActivityToIncidentCommand
@startTransaction
@method,setRepeating,system-permission,AddActivityToIncidentCommand,role,owner
@method,set,system-permission,AddActivityToIncidentCommand,entity,incident
@endTransaction

system-permission,435,EditIncidentActivityCommand
@startTransaction
@method,setRepeating,system-permission,EditIncidentActivityCommand,role,everyone
@method,set,system-permission,EditIncidentActivityCommand,entity,incident
@endTransaction

system-permission,440,AnalyzeAndPlanCommand
@startTransaction
@method,setRepeating,system-permission,AnalyzeAndPlanCommand,role,owner
@method,set,system-permission,AnalyzeAndPlanCommand,entity,incident
@endTransaction

system-permission,445,CompleteIncidentActivityCommand
@startTransaction
@method,setRepeating,system-permission,CompleteIncidentActivityCommand,role,everyone
@method,set,system-permission,CompleteIncidentActivityCommand,entity,incident
@endTransaction

system-permission,450,ImportIncidentCommand
@startTransaction
@method,setRepeating,system-permission,ImportIncidentCommand,role,everyone
@method,set,system-permission,ImportIncidentCommand,entity,incident
@endTransaction

system-permission,455,ImportIncidentActivityCommand
@startTransaction
@method,setRepeating,system-permission,ImportIncidentActivityCommand,role,everyone
@method,set,system-permission,ImportIncidentActivityCommand,entity,incident
@endTransaction

#### PERMITCLIQ

## implement new default risk assessment type configuration
configurationSetting,ra.default.type,IBANX_RA_BP1
@SQL,DELETE FROM IBANX_BOT_AA WHERE NAME = 'defaultRaType'

## attach specialty picklists to measure definitions
@startTransaction
@method,set,measuredefinition,pbmAdembeschermingRequired,picklist,pbmAdembescherming
@endTransaction