############ create index on acl name
## first make sure the acl names are unique
@PATCH,,UniquefyAclNames
## then create index
@SQL,CREATE UNIQUE INDEX I_IBANX_ACL_NAME ON IBANX_ACL (NAME);

############ updating indexes on ibanx_trustee_permission
## removing duplicate records
@SQL,CREATE TABLE IBANX_TRUSTEE_PERMISSION_TEMP AS SELECT * FROM IBANX_TRUSTEE_PERMISSION WHERE 1 GROUP BY ACL_ID\, TRUSTEE\, PERMISSION\, TRUSTEE_TYPE\, NEGATIVE;
@SQL,DROP TABLE IBANX_TRUSTEE_PERMISSION;
## MySQL
@SQL,RENAME TABLE IBANX_TRUSTEE_PERMISSION_TEMP TO IBANX_TRUSTEE_PERMISSION;,mysql
## Oracle
@SQL,ALTER TABLE IBANX_TRUSTEE_PERMISSION_TEMP RENAME TO IBANX_TRUSTEE_PERMISSION;,oracle
## MSSql
@SQL,CREATE TABLE IBANX_TRUSTEE_PERMISSION AS SELECT * FROM IBANX_TRUSTEE_PERMISSION_TEMP WHERE 1 GROUP BY ACL_ID\, TRUSTEE\, PERMISSION\, TRUSTEE_TYPE\, NEGATIVE;,mssql
@SQL,DROP TABLE IBANX_TRUSTEE_PERMISSION_TEMP;,mssql

## create index on trusteepermission uniquekey
@SQL,CREATE UNIQUE INDEX I_IBANX_TP_ID ON IBANX_TRUSTEE_PERMISSION (ID);
@SQL,CREATE UNIQUE INDEX I_IBANX_TP_UID ON IBANX_TRUSTEE_PERMISSION(ACL_ID\, TRUSTEE\, TRUSTEE_TYPE\, PERMISSION\, NEGATIVE);
@SQL,CREATE INDEX I_IBANX_TP_ACLID ON IBANX_TRUSTEE_PERMISSION (ACL_ID);
@SQL,CREATE INDEX I_IBANX_TP_ROLE ON IBANX_TRUSTEE_PERMISSION (TRUSTEE);
@SQL,CREATE INDEX I_IBANX_TP_ROLE_PERM ON IBANX_TRUSTEE_PERMISSION (TRUSTEE\, PERMISSION);

############ create indexes on team
## first make sure the team identies are unique
@PATCH,,scq.UniquefyTeamIdentities
## then create indexex
@SQL,CREATE UNIQUE INDEX I_IBANX_TEAM_ID ON IBANX_TEAM(ID);
@SQL,CREATE UNIQUE INDEX I_IBANX_TEAM_NUMBER ON IBANX_TEAM(NR);

@SQL,CREATE INDEX I_IBANX_TEAM_ACL_ID ON IBANX_TEAM(ACL_ID);
@SQL,CREATE INDEX I_IBANX_TEAM_ORGCID ON IBANX_TEAM(ORG_CONTEXT_ID);
@SQL,CREATE INDEX I_IBANX_TEAM_ORGC ON IBANX_TEAM(ORG_CONTEXT);


## kernel updates

simplegroup,global_system_administrators
@allocateRoleToGroup,GLOBAL,system_administrator,global_system_administrators


## shiftcliq base update

roleperm,DefaultTaskDefinition,everyone,BROWSE
roleperm,DefaultTaskDefinition,everyone,READ
roleperm,DefaultTaskDefinition,anonymous,BROWSE
roleperm,DefaultTaskDefinition,anonymous,READ

roleperm,StateAcl OPERATORVERSLAG_PROC - OPEN,supergroover,GENERATE_LOGITEM