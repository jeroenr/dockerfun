<?xml version="1.0" encoding="UTF-8"?>
$data.setLayoutTemplate("/Rss.vm")
$page.setHttpEquiv("Content-type","text/html; charset=utf-8")
<!-- generated by
 $buildInfo.product - $buildInfo.buildInformation build on $i18n.formatDate($buildInfo.currentBuildDate)
 #if($buildInfo.deployment.currentDeployDate)$!buildInfo.deployment.customer - $!buildInfo.deployment.project $!buildInfo.deployment.version #$!buildInfo.deployment.currentDeployNumber deployed on $i18n.formatDate($buildInfo.deployment.currentDeployDate)#end
-->
<rss version="0.92">
<channel>
    #set($objectclassName=$i18n.format($data.Parameters.objectClassName,"objectName"))
    #set($baseUrl="${data.serverScheme}://${data.serverName}:${data.serverPort}")
    #set($title=$queryspec.get("title", "$!data.Parameters.title"))
    <title>$buildInfo.product $!buildInfo.deployment.customer $!title ${data.serverName}</title>
    <link>${baseUrl}$data.ContextPath</link>
    <description>$objectclassName</description>
    <language>$data.Locale.language</language>

    #set($urlPart="logevent")
    #if("$queryspec.objectClassName"=="ibanx.task.TaskIF")
        #set($urlPart="task")
    #elseif("$queryspec.objectClassName"=="ibanx.logbook.InstructionIF")
        #set($urlPart="instruction")
    #elseif("$queryspec.objectClassName"=="ibanx.logbook.DeviationIF")
        #set($urlPart="deviation")
    #end

    #foreach ($object in $objectlist.ResultSetIterator)
        #set($status=$i18n.format($object,"state_${object.lifecycleState.name}"))
        #set($boTypeDescription=$i18n.format($object,"businessObjectTypeDescription"))
        <item>
            <title>
            $object.orgContext - $boTypeDescription ${object.number} - $status#if($object.funcLevelTwo) - $object.funcLevelTwo#end #if($object.tag)- $object.tag#end
            </title>
            <link>${baseUrl}${data.ContextPath}/$urlPart/${object.id}</link>
            <description>
            <![CDATA[
              <h3>$object.orgContext - $boTypeDescription $object.number</h3>
              <table width="100%">
              <tr>
                <td width="25%"><strong>#ui_label("number")</strong></td>
                <td>#ui_value("number")</td>
              </tr>
              <tr>
                <td><strong>#ui_label("orgContext")</strong></td>
                <td>#ui_value("orgContext")</td>
              </tr>
              <tr>
                <td><strong>#ui_label("funcLevelTwo")</strong></td>
                <td>#ui_value("funcLevelTwo")</td>
              </tr>
              <tr>
                <td><strong>#ui_label("tag")</strong></td>
                <td>#ui_value("tag")</td>
              </tr>
              <tr>
                <td><strong>#ui_label("lifecycleState.description")</strong></td>
                <td>$status</td>
              </tr>
              <tr>
                <td><strong>#ui_label("title")</strong></td>
                <td>#ui_value("title")</td>
              </tr>
              </table>
            ]]>
            </description>
        </item>
    #end
</channel>
</rss>